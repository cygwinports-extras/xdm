diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/xdm-1.1.6/configure.ac src/xdm-1.1.6/configure.ac
--- origsrc/xdm-1.1.6/configure.ac	2007-08-16 16:46:47.000000000 -0500
+++ src/xdm-1.1.6/configure.ac	2007-08-17 13:37:10.187500000 -0500
@@ -242,9 +242,13 @@
 
 XDM_LIBS="$XDM_LIBS $XDM_OS_LIBS"
 
-PKG_CHECK_EXISTS(xinerama, [
-	AC_DEFINE([USE_XINERAMA], 1, 
-		[Define to 1 to use XINERAMA in greeter & chooser])
+# Xinerama support
+AC_ARG_ENABLE(xinerama,
+		AC_HELP_STRING([--enable-xinerama],
+			[Use Xinerama in greeter and chooser]),
+    [USE_XINERAMA="$enableval"],
+	PKG_CHECK_EXISTS(xinerama, [USE_XINERAMA="yes"], [USE_XINERAMA="no"]))
+if test "x$USE_XINERAMA" = "xyes" ; then
 	PKG_CHECK_MODULES(XINERAMA, xinerama)
 	XDM_CFLAGS="$XDM_CFLAGS $XINERAMA_CFLAGS"
 	XDM_LIBS="$XDM_LIBS $XINERAMA_LIBS"
@@ -252,7 +256,10 @@
 	CHOOSER_LIBS="$CHOOSER_LIBS $XINERAMA_LIBS"
 	GREETER_CFLAGS="$GREETER_CFLAGS $XINERAMA_CFLAGS"
 	GREETER_LIBS="$GREETER_LIBS $XINERAMA_LIBS"
-])
+	AC_DEFINE([USE_XINERAMA], 1, 
+		[Define to 1 to use XINERAMA in greeter & chooser])
+fi
+AM_CONDITIONAL(USE_XINERAMA, test "x$USE_XINERAMA" = "xyes")
 
 # Xft text drawing for the greeter screen
 AC_ARG_WITH(xft, 
diff -urN -x CYGWIN-PATCHES -x 'aclocal.m4*' -x autom4te.cache -x config.cache -x config.log -x config.status -x config.h -x config.h.in -x ABOUT-NLS -x Makefile.in.in -x Makevars.template -x '*SlackBuild*' -x '*.egg-info' -x '*.class' -x '*.pyc' -x '*.mo' -x '*.gmo' -x '*.orig' -x '*.rej' -x '*.spec' -x '*.temp' -x '*~' -x '*.stackdump' -x COPYING -x INSTALL -x compile -x config-ml.in -x config.guess -x config.sub -x depcomp -x elisp-comp -x install-sh -x ltmain.sh -x mdate-sh -x missing -x mkinstalldirs -x py-compile -x symlink-tree -x texinfo.tex -x ylwrap -x config.rpath -x Makefile.in -x makefile.in -x configure -x omf.make -x xmldocs.make -x gnome-doc-utils.make -x gnome-doc-utils.m4 -x intltool.m4 -x intltool-extract -x intltool-extract.in -x intltool-merge -x intltool-merge.in -x intltool-update -x intltool-update.in origsrc/xdm-1.1.6/greeter/Makefile.am src/xdm-1.1.6/greeter/Makefile.am
--- origsrc/xdm-1.1.6/greeter/Makefile.am	2006-07-14 15:01:18.000000000 -0500
+++ src/xdm-1.1.6/greeter/Makefile.am	2007-08-17 13:37:10.203125000 -0500
@@ -14,7 +14,7 @@
 
 AM_CFLAGS = $(XDMGREET_CFLAGS) -I$(top_srcdir)
 
-libXdmGreet_la_LDFLAGS = -module -avoid-version
+libXdmGreet_la_LDFLAGS = -module -avoid-version -no-undefined
 endif
 
 if LINT
